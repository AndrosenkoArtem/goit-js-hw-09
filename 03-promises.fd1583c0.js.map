{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAGMC,EAAOC,SAASC,cAAc,SAEhCC,GAAW,EA8EfH,EAAKI,iBAAiB,UA7DtB,SAAsBC,GACpBA,EAAEC,iBACF,IAAMC,EAAkBF,EAAEG,cAAcC,SAASC,MAAMC,MACjDC,EAAiBP,EAAEG,cAAcC,SAASI,KAAKF,MAC/CG,EAAmBT,EAAEG,cAAcC,SAASM,OAAOJ,MACrDK,EAAkB,EAClBC,EAAeC,OAAOX,GAC1B,KAAIJ,GAAYI,GAAmB,GAAKK,GAAkB,GAA1D,CAGAT,GAAW,EAEX,IAAMgB,EAAwBC,aAAY,WA3B5C,IAAuBC,EAAUX,EACzBY,GA8CR,SAAoCC,G,IAClCJ,EADkCI,EAClCJ,sBACAH,EAFkCO,EAElCP,gBACAF,EAHkCS,EAGlCT,iBAEA,GAAIE,GAAmBF,EACrBU,cAAcL,GACdhB,GAAW,EACXa,EAAkB,C,EA1BlBS,CAA2B,CACzBN,wBACAH,gBAHFA,GAAmB,EAIjBF,sBAhCiBO,EAmCLL,EAnCeN,EAmCEH,EAlC3Be,EAAgBI,KAAKC,SAAW,GACtB,IAAIC,SAAQ,SAACC,EAASC,GACpCC,YAAW,WACLT,EAEFO,EAAQR,GAGRS,EAAOT,E,GAERX,E,KAyBAsB,MAAK,SAAAX,IAwBZ,SAA+BE,G,IAAEN,EAAFM,EAAEN,aAAcL,EAAhBW,EAAgBX,eAAgBS,EAAhCE,EAAgCF,SAC7DY,EAAAnC,GAASoC,OAAOC,QACd,uBACIC,OADqBf,EAAS,QAEjCe,OADCnB,EAAeC,OAAON,GACvB,M,CA1BGyB,CAAsB,CAAEpB,aADxBA,GAAgBC,OAAON,GACeA,iBAAgBS,Y,IAEvDiB,OAAM,SAAAjB,IA2Bb,SAA6BE,G,IAAEN,EAAFM,EAAEN,aAAcL,EAAhBW,EAAgBX,eAAgBS,EAAhCE,EAAgCF,SAE3DY,EAAAnC,GAASoC,OAAOK,QACd,sBACIH,OADoBf,EAAS,QAEhCe,OADCnB,EAAeC,OAAON,GACvB,M,CA9BG4B,CAAoB,CAAEvB,aADtBA,GAAgBC,OAAON,GACaA,iBAAgBS,Y,MAEvDT,GACHmB,YAAW,W,OAAM/B,EAAKyC,O,GAASlC,EAtB7B,C","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\n\nconst form = document.querySelector('.form');\n\nlet isActive = false;\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        // Fulfill\n        resolve(position);\n      } else {\n        // Reject\n        reject(position);\n      }\n    }, delay);\n  });\n  return promise;\n}\nfunction onSubmitForm(e) {\n  e.preventDefault();\n  const deleyInputValue = e.currentTarget.elements.delay.value;\n  const stepInputValue = e.currentTarget.elements.step.value;\n  const amountInputValue = e.currentTarget.elements.amount.value;\n  let currentPosition = 0;\n  let currentDelay = Number(deleyInputValue);\n  if (isActive || deleyInputValue <= 0 || stepInputValue <= 0) {\n    return;\n  }\n  isActive = true;\n\n  const promiseResultInterval = setInterval(() => {\n    currentPosition += 1;\n    ifPromiseIntervalCompleted({\n      promiseResultInterval,\n      currentPosition,\n      amountInputValue,\n    });\n\n    createPromise(currentPosition, deleyInputValue)\n      .then(position => {\n        currentDelay += Number(stepInputValue);\n        createPrimiseSuccsess({ currentDelay, stepInputValue, position });\n      })\n      .catch(position => {\n        currentDelay += Number(stepInputValue);\n        createPromiseFailed({ currentDelay, stepInputValue, position });\n      });\n  }, stepInputValue);\n  setTimeout(() => form.reset(), deleyInputValue);\n}\nfunction ifPromiseIntervalCompleted({\n  promiseResultInterval,\n  currentPosition,\n  amountInputValue,\n}) {\n  if (currentPosition >= amountInputValue) {\n    clearInterval(promiseResultInterval);\n    isActive = false;\n    currentPosition = 0;\n\n    return;\n  }\n}\nfunction createPrimiseSuccsess({ currentDelay, stepInputValue, position }) {\n  Notiflix.Notify.success(\n    `✅ Fulfilled promise ${position} in ${\n      currentDelay - Number(stepInputValue)\n    }ms`\n  );\n}\nfunction createPromiseFailed({ currentDelay, stepInputValue, position }) {\n  // currentDelay += Number(stepInputValue);\n  Notiflix.Notify.failure(\n    `❌ Rejected promise ${position} in ${\n      currentDelay - Number(stepInputValue)\n    }ms`\n  );\n}\n\nform.addEventListener('submit', onSubmitForm);\n//\n// function onSubmitForm(e) {\n//   e.preventDefault();\n//   let currentDelay = Number(refs.delay[0].value);\n\n//   if (isActive) {\n//     return;\n//   }\n//   isActive = true;\n//   promiseResultInterval = setInterval(() => {\n//     currentPosition += 1;\n//     if (currentPosition > Number(refs.amount[0].value)) {\n//       clearInterval(promiseResultInterval);\n//       isActive = false;\n//       currentPosition = 0;\n\n//       return;\n//     }\n\n//     createPromise(currentPosition, refs.delay[0].value)\n//       .then(({ position, delay }) => {\n//         currentDelay += Number(refs.step[0].value);\n//         Notiflix.Notify.success(\n//           `✅ Fulfilled promise ${position} in ${\n//             currentDelay - Number(refs.step[0].value)\n//           }ms`\n//         );\n//       })\n//       .catch(({ position, delay }) => {\n//         currentDelay += Number(refs.step[0].value);\n//         Notiflix.Notify.failure(\n//           `❌ Rejected promise ${position} in ${\n//             currentDelay - Number(refs.step[0].value)\n//           }ms`\n//         );\n//       });\n//   }, refs.step[0].value);\n// }\n"],"names":["$6JpON","parcelRequire","$ce04d3a99e08e73b$var$form","document","querySelector","$ce04d3a99e08e73b$var$isActive","addEventListener","e","preventDefault","deleyInputValue","currentTarget","elements","delay","value","stepInputValue","step","amountInputValue","amount","currentPosition","currentDelay","Number","promiseResultInterval","setInterval","position","shouldResolve","param","clearInterval","$ce04d3a99e08e73b$var$ifPromiseIntervalCompleted","Math","random","Promise","resolve","reject","setTimeout","then","$parcel$interopDefault","Notify","success","concat","$ce04d3a99e08e73b$var$createPrimiseSuccsess","catch","failure","$ce04d3a99e08e73b$var$createPromiseFailed","reset"],"version":3,"file":"03-promises.fd1583c0.js.map"}